<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³å¸Œæœ›è€…ç™»éŒ²ãƒšãƒ¼ã‚¸</title>
    <script type="text/javascript" src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; }
        form { max-width: 500px; margin: auto; padding: 20px; border: 1px solid #ccc; border-radius: 10px; }
        label { display: block; margin-top: 10px; }
        select, textarea, input { width: 100%; padding: 8px; margin-top: 5px; }
        .error { color: red; font-size: 0.9em; }
        .buttons { margin-top: 15px; display: flex; flex-direction: column; align-items: center; }
        .dob-container { display: flex; gap: 10px; align-items: center; }
        .dob-container select { width: 32%; }
        .privacy-policy { font-size: 0.9em; text-align: center; margin-bottom: 10px; }
        #drop-area { border: 2px dashed #ccc; padding: 20px; text-align: center; cursor: pointer; margin-top: 10px; }
    </style>
</head>
<body>
    <h2 style="text-align: center;">ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³å¸Œæœ›è€…ç™»éŒ²ãƒšãƒ¼ã‚¸</h2>
    <form id="registrationForm">
        <label>ãƒ»åå‰ï¼ˆ<span style="color: red;">å¿…é ˆ</span>ï¼‰<input type="text" id="name" required></label>
        <span class="error" id="error-name"></span>
        
        <label>ãƒ»ãƒ•ãƒªã‚¬ãƒŠï¼ˆ<span style="color: red;">å¿…é ˆ</span>ï¼‰<input type="text" id="furigana" required></label>
        <span class="error" id="error-furigana"></span>

        <label>ãƒ»ç”Ÿå¹´æœˆæ—¥ï¼ˆ<span style="color: red;">å¿…é ˆ</span>ï¼‰</label>
        <div class="dob-container">
            <select id="dob-year" required>
                <option value="">YYYY</option>
                <script>
                    for(let year = 1970; year <= 2020; year++) {
                        document.write(`<option value="${year}">${year}</option>`);
                    }
                </script>
            </select>
            /
            <select id="dob-month" required>
                <option value="">MM</option>
                <script>
                    for(let month = 1; month <= 12; month++) {
                        document.write(`<option value="${month}">${month}</option>`);
                    }
                </script>
            </select>
            /
            <select id="dob-day" required>
                <option value="">DD</option>
                <script>
                    for(let day = 1; day <= 31; day++) {
                        document.write(`<option value="${day}">${day}</option>`);
                    }
                </script>
            </select>
        </div>
        <span class="error" id="error-dob-year"></span>
        <span class="error" id="error-dob-month"></span>
        <span class="error" id="error-dob-day"></span>
        
        <label>ãƒ»ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆ<span style="color: red;">å¿…é ˆ</span>ï¼‰<input type="email" id="email" required></label>
        <span class="error" id="error-email"></span>
        
        <label>ãƒ»é›»è©±ç•ªå·ï¼ˆä»»æ„ï¼‰<input type="tel" id="phone"></label>
        
        <label>ãƒ»å¸Œæœ›è·ç¨®ï¼ˆ<span style="color: red;">å¿…é ˆ</span>ï¼‰
            <select id="job" required>
                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                <option value="éŸ³éŸ¿">éŸ³éŸ¿</option>
                <option value="ç…§æ˜">ç…§æ˜</option>
                <option value="æ˜ åƒ">æ˜ åƒ</option>
                <option value="èˆå°">èˆå°</option>
                <option value="é‹å–¶">é‹å–¶</option>
            </select>
        </label>
        <span class="error" id="error-job"></span>
        
        <label>ãƒ»å¸Œæœ›å‹¤å‹™æ—¥ç¨‹ï¼ˆ<span style="color: red;">å¿…é ˆ</span>ï¼‰<textarea id="schedule" required></textarea></label>
        <span class="error" id="error-schedule"></span>
        
        <label>ãƒ»çµŒé¨“ã®æœ‰ç„¡ï¼ˆ<span style="color: red;">å¿…é ˆ</span>ï¼‰
            <select id="experience" required>
                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                <option value="çµŒé¨“ãªã—">çµŒé¨“ãªã—</option>
                <option value="çµŒé¨“ã‚ã‚Šã€œï¼‘å¹´æœªæº€">çµŒé¨“ã‚ã‚Šã€œï¼‘å¹´æœªæº€</option>
                <option value="çµŒé¨“ã‚ã‚Šã€œï¼“å¹´æœªæº€">çµŒé¨“ã‚ã‚Šã€œï¼“å¹´æœªæº€</option>
                <option value="çµŒé¨“ã‚ã‚Šã€œï¼•å¹´æœªæº€">çµŒé¨“ã‚ã‚Šã€œï¼•å¹´æœªæº€</option>
                <option value="çµŒé¨“ã‚ã‚Šã€œï¼•å¹´ä»¥ä¸Š">çµŒé¨“ã‚ã‚Šã€œï¼•å¹´ä»¥ä¸Š</option>
            </select>
        </label>
        <span class="error" id="error-experience"></span>
        
        <label>ãƒ»ã‚¹ã‚­ãƒ«&å–å¾—è³‡æ ¼&è‡ªå·±PRï¼ˆ<span style="color: red;">å¿…é ˆ</span>ï¼‰<textarea id="skills" required></textarea></label>
        <span class="error" id="error-skills"></span>
        
        <label>ãƒ»å¿—æœ›å‹•æ©Ÿï¼ˆ<span style="color: red;">å¿…é ˆ</span>ï¼‰<textarea id="motivation" required></textarea></label>
        <span class="error" id="error-motivation"></span>
        
        <label>ãƒ»å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆ10MBã¾ã§ï¼‰ï¼ˆ<span style="color: red;">å¿…é ˆ</span>ï¼‰</label>
        <div id="drop-area">ã“ã“ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã™ã‚‹ã‹ã€ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠ</div>
        <input type="file" id="photo" accept="image/*" required style="display: none;">
        <span class="error" id="error-photo"></span>
        
        <p class="privacy-policy">
            ğŸ“œ <strong>å€‹äººæƒ…å ±ã®å–ã‚Šæ‰±ã„ã«ã¤ã„ã¦</strong><br>
            ã”ç™»éŒ²ã„ãŸã ã„ãŸå€‹äººæƒ…å ±ã¯ã€å½“ç¤¾ã®æ¡ç”¨æ´»å‹•ãŠã‚ˆã³é–¢é€£ã™ã‚‹æ¥­å‹™ã®ãŸã‚ã«ã®ã¿åˆ©ç”¨ã—ã€
            ç¬¬ä¸‰è€…ã¸æä¾›ãƒ»é–‹ç¤ºã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br>
            ãªãŠã€å½“ç¤¾ã®å€‹äººæƒ…å ±ä¿è­·æ–¹é‡ã«åŸºã¥ãã€é©åˆ‡ã«ç®¡ç†ã„ãŸã—ã¾ã™ã€‚<br>
            è©³ç´°ã«ã¤ã„ã¦ã¯ã€<a href="privacy-policy.html" target="_blank">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>ã‚’ã”ç¢ºèªãã ã•ã„ã€‚
        </p>

        <div class="buttons">
            <button type="button" onclick="validateForm()">ç™»éŒ²ç¢ºèª</button>
        </div>
    </form>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const fileInput = document.getElementById("photo");

            fileInput.addEventListener("change", function() {
                const file = this.files[0];
                if (file && file.size > 10 * 1024 * 1024) { // 10MB = 10 * 1024 * 1024 bytes
                    alert("ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒ10MBã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚åˆ¥ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚");
                    this.value = ""; // ãƒ•ã‚¡ã‚¤ãƒ«å…¥åŠ›ã‚’ã‚¯ãƒªã‚¢
                }
            });
        });
document.addEventListener("DOMContentLoaded", function() {
    const fileInput = document.getElementById("photo");
    const dropArea = document.getElementById("drop-area");

    dropArea.addEventListener("click", function() {
        fileInput.click();
    });

    dropArea.addEventListener("dragover", function(e) {
        e.preventDefault();
        e.stopPropagation();
        dropArea.classList.add("dragover");
    });

    dropArea.addEventListener("dragleave", function(e) {
        e.preventDefault();
        e.stopPropagation();
        dropArea.classList.remove("dragover");
    });

    dropArea.addEventListener("drop", function(e) {
        e.preventDefault();
        e.stopPropagation();
        dropArea.classList.remove("dragover");
        const files = e.dataTransfer.files;
        if (files.length > 0) {
            fileInput.files = files;
            fileInput.dispatchEvent(new Event('change'));
        }
    });

    fileInput.addEventListener("change", function() {
        const file = this.files[0];
        if (file && file.size > 10 * 1024 * 1024) { // 10MB = 10 * 1024 * 1024 bytes
            alert("ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒ10MBã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚åˆ¥ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚");
            this.value = ""; // ãƒ•ã‚¡ã‚¤ãƒ«å…¥åŠ›ã‚’ã‚¯ãƒªã‚¢
        } else if (file) {
            dropArea.textContent = file.name;
        }
    });
    if (localStorage.getItem("restoreData")) {
        const restoreData = JSON.parse(localStorage.getItem("restoreData"));
        for (const key in restoreData) {
            const input = document.getElementById(key);
            if (input) {
                input.value = restoreData[key];
            }
        }
        localStorage.removeItem("restoreData");
    }
});
        function validateForm() {
    let isValid = true;
    document.querySelectorAll(".error").forEach(el => el.textContent = "");

    const fields = ["name", "furigana", "email", "phone", "job", "schedule", "experience", "skills", "motivation"];
    let formData = {};

    fields.forEach(id => {
        let input = document.getElementById(id);
        if (!input.value.trim() && id !== "phone") { // phone ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ä»»æ„
            document.getElementById("error-" + id).textContent = "æœªå…¥åŠ›ã§ã™";
            isValid = false;
        } else {
            formData[id] = input.value;
        }
    });

    const dobYear = document.getElementById("dob-year").value;
    const dobMonth = document.getElementById("dob-month").value;
    const dobDay = document.getElementById("dob-day").value;
    if (!dobYear || !dobMonth || !dobDay) {
        document.getElementById("error-dob-year").textContent = "æœªå…¥åŠ›ã§ã™";
        isValid = false;
    } else {
        formData.dob = `${dobYear}-${dobMonth}-${dobDay}`;
    }

    const fileInput = document.getElementById("photo");
    const file = fileInput.files[0];
    if (file) {
        formData.photoName = file.name; // ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã«è¿½åŠ 
    }

    if (isValid) {
        try {
            localStorage.setItem("formData", JSON.stringify(formData));
            console.log("Form Data Saved to localStorage:", formData);
            window.location.href = "confirmation.html";
        } catch (e) {
            if (e.name === 'QuotaExceededError') {
                alert("ä¿å­˜å®¹é‡ãŒè¶…éã—ã¾ã—ãŸã€‚ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šæ¸›ã—ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚");
            }
        }
    }
}
    </script>
</body>
</html>
